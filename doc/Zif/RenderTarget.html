<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Zif::RenderTarget
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Zif::RenderTarget";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (R)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Zif.html" title="Zif (module)">Zif</a></span></span>
     &raquo; 
    <span class="title">RenderTarget</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Zif::RenderTarget
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Zif::RenderTarget</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="Serializable.html" title="Zif::Serializable (module)">Serializable</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/lib/zif/sprites/render_target.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>For creating and updating Render Targets References the render target in a @containing_sprite</p>


  </div>
</div>
<div class="tags">
  

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="SimpleLayer.html" title="Zif::SimpleLayer (class)">SimpleLayer</a></span></p>
</div>




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#bg_color-instance_method" title="#bg_color (instance method)">#<strong>bg_color</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute bg_color.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#height-instance_method" title="#height (instance method)">#<strong>height</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute height.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#labels-instance_method" title="#labels (instance method)">#<strong>labels</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute labels.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#name-instance_method" title="#name (instance method)">#<strong>name</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute name.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#primitives-instance_method" title="#primitives (instance method)">#<strong>primitives</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute primitives.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#sprites-instance_method" title="#sprites (instance method)">#<strong>sprites</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute sprites.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#width-instance_method" title="#width (instance method)">#<strong>width</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute width.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#z-instance_method" title="#z (instance method)">#<strong>z</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute z.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clicked%3F-instance_method" title="#clicked? (instance method)">#<strong>clicked?</strong>(point, kind = :up)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#containing_sprite-instance_method" title="#containing_sprite (instance method)">#<strong>containing_sprite</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Instantiate only when needed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cut_containing_sprites-instance_method" title="#cut_containing_sprites (instance method)">#<strong>cut_containing_sprites</strong>(rect)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Expects xywh                 right                   v     top -&gt; <code>----</code>-+   |            |    |r|   |            | 1  <code>-</code>—+ &lt;- bottom            |    |  4  |            |    |     |     0,0 -&gt; <code>----</code>—–+                 ^     ^                left   @width.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#exclude_from_serialize-instance_method" title="#exclude_from_serialize (instance method)">#<strong>exclude_from_serialize</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#full_containing_sprite-instance_method" title="#full_containing_sprite (instance method)">#<strong>full_containing_sprite</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(name, bg_color = :black, width = 1, height = 1, z = 0)  &#x21d2; RenderTarget </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of RenderTarget.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#project_from-instance_method" title="#project_from (instance method)">#<strong>project_from</strong>(rect = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Expects rect is x, y, w, h - not source_…</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#project_to-instance_method" title="#project_to (instance method)">#<strong>project_to</strong>(rect = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Expects rect is x, y, w, h.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#redraw-instance_method" title="#redraw (instance method)">#<strong>redraw</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>By setting width and height, this actually recreates the render target in memory This is the only way to force any changes to the RT.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#redraw_from_buffer-instance_method" title="#redraw_from_buffer (instance method)">#<strong>redraw_from_buffer</strong>(sprites = [], cut_rect = nil, additional_containing_sprites = [])  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#relative_point-instance_method" title="#relative_point (instance method)">#<strong>relative_point</strong>(point)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#resize-instance_method" title="#resize (instance method)">#<strong>resize</strong>(w, h)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_inactive_buffer_name-instance_method" title="#set_inactive_buffer_name (instance method)">#<strong>set_inactive_buffer_name</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>—————- Double Buffering.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#switch_buffer-instance_method" title="#switch_buffer (instance method)">#<strong>switch_buffer</strong>(additional_containing_sprites = [])  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Serializable.html" title="Zif::Serializable (module)">Serializable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Serializable.html#inspect-instance_method" title="Zif::Serializable#inspect (method)">#inspect</a></span>, <span class='object_link'><a href="Serializable.html#serialize-instance_method" title="Zif::Serializable#serialize (method)">#serialize</a></span>, <span class='object_link'><a href="Serializable.html#to_s-instance_method" title="Zif::Serializable#to_s (method)">#to_s</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(name, bg_color = :black, width = 1, height = 1, z = 0)  &#x21d2; <tt><span class='object_link'><a href="" title="Zif::RenderTarget (class)">RenderTarget</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of RenderTarget.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 10</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_bg_color'>bg_color</span><span class='op'>=</span><span class='symbol'>:black</span><span class='comma'>,</span> <span class='id identifier rubyid_width'>width</span><span class='op'>=</span><span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_height'>height</span><span class='op'>=</span><span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_z'>z</span><span class='op'>=</span><span class='int'>0</span><span class='rparen'>)</span>
  <span class='ivar'>@name</span>       <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
  <span class='ivar'>@width</span>      <span class='op'>=</span> <span class='id identifier rubyid_width'>width</span>
  <span class='ivar'>@height</span>     <span class='op'>=</span> <span class='id identifier rubyid_height'>height</span>
  <span class='ivar'>@z</span>          <span class='op'>=</span> <span class='id identifier rubyid_z'>z</span>
  <span class='ivar'>@sprites</span>    <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@labels</span>     <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@primitives</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='comment'># This could probably be improved with a Color module
</span>  <span class='ivar'>@bg_color</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='id identifier rubyid_bg_color'>bg_color</span>
              <span class='kw'>when</span> <span class='symbol'>:black</span>
                <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='rbracket'>]</span>
              <span class='kw'>when</span> <span class='symbol'>:white</span>
                <span class='lbracket'>[</span><span class='int'>255</span><span class='comma'>,</span> <span class='int'>255</span><span class='comma'>,</span> <span class='int'>255</span><span class='comma'>,</span> <span class='int'>0</span><span class='rbracket'>]</span>
              <span class='kw'>else</span>
                <span class='id identifier rubyid_bg_color'>bg_color</span>
              <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="bg_color=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="bg_color-instance_method">
  
    #<strong>bg_color</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute bg_color.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


7
8
9</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 7</span>

<span class='kw'>def</span> <span class='id identifier rubyid_bg_color'>bg_color</span>
  <span class='ivar'>@bg_color</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="height=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="height-instance_method">
  
    #<strong>height</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute height.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


7
8
9</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 7</span>

<span class='kw'>def</span> <span class='id identifier rubyid_height'>height</span>
  <span class='ivar'>@height</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="labels=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="labels-instance_method">
  
    #<strong>labels</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute labels.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


8
9
10</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 8</span>

<span class='kw'>def</span> <span class='id identifier rubyid_labels'>labels</span>
  <span class='ivar'>@labels</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="name=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="name-instance_method">
  
    #<strong>name</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute name.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


7
8
9</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 7</span>

<span class='kw'>def</span> <span class='id identifier rubyid_name'>name</span>
  <span class='ivar'>@name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="primitives=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="primitives-instance_method">
  
    #<strong>primitives</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute primitives.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


8
9
10</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 8</span>

<span class='kw'>def</span> <span class='id identifier rubyid_primitives'>primitives</span>
  <span class='ivar'>@primitives</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="sprites=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="sprites-instance_method">
  
    #<strong>sprites</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute sprites.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


8
9
10</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 8</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sprites'>sprites</span>
  <span class='ivar'>@sprites</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="width=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="width-instance_method">
  
    #<strong>width</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute width.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


7
8
9</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 7</span>

<span class='kw'>def</span> <span class='id identifier rubyid_width'>width</span>
  <span class='ivar'>@width</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="z=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="z-instance_method">
  
    #<strong>z</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute z.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


8
9
10</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 8</span>

<span class='kw'>def</span> <span class='id identifier rubyid_z'>z</span>
  <span class='ivar'>@z</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="clicked?-instance_method">
  
    #<strong>clicked?</strong>(point, kind = :up)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


73
74
75
76
77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 73</span>

<span class='kw'>def</span> <span class='id identifier rubyid_clicked?'>clicked?</span><span class='lparen'>(</span><span class='id identifier rubyid_point'>point</span><span class='comma'>,</span> <span class='id identifier rubyid_kind'>kind</span><span class='op'>=</span><span class='symbol'>:up</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_relative'>relative</span> <span class='op'>=</span> <span class='id identifier rubyid_relative_point'>relative_point</span><span class='lparen'>(</span><span class='id identifier rubyid_point'>point</span><span class='rparen'>)</span>
  <span class='comment'># puts &quot;#{self.class.name}:#{name}: clicked? #{point} -&gt; relative #{relative}&quot;
</span>
  <span class='id identifier rubyid_find_and_return'>find_and_return</span> <span class='op'>=</span> <span class='tlambda'>-&gt;</span><span class='lparen'>(</span><span class='id identifier rubyid_sprite'>sprite</span><span class='rparen'>)</span> <span class='tlambeg'>{</span> <span class='id identifier rubyid_sprite'>sprite</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:clicked?</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_sprite'>sprite</span><span class='period'>.</span><span class='id identifier rubyid_clicked?'>clicked?</span><span class='lparen'>(</span><span class='id identifier rubyid_relative'>relative</span><span class='comma'>,</span> <span class='id identifier rubyid_kind'>kind</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='ivar'>@sprites</span><span class='period'>.</span><span class='id identifier rubyid_reverse_each'>reverse_each</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_find_and_return'>find_and_return</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='ivar'>@primitives</span><span class='period'>.</span><span class='id identifier rubyid_reverse_each'>reverse_each</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_find_and_return'>find_and_return</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="containing_sprite-instance_method">
  
    #<strong>containing_sprite</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Instantiate only when needed</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 30</span>

<span class='kw'>def</span> <span class='id identifier rubyid_containing_sprite'>containing_sprite</span>
  <span class='kw'>return</span> <span class='ivar'>@containing_sprite</span> <span class='kw'>if</span> <span class='ivar'>@containing_sprite</span>

  <span class='id identifier rubyid_redraw'>redraw</span>
  <span class='ivar'>@containing_sprite</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Zif.html" title="Zif (module)">Zif</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Sprite.html" title="Zif::Sprite (class)">Sprite</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Sprite.html#initialize-instance_method" title="Zif::Sprite#initialize (method)">new</a></span></span><span class='period'>.</span><span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rt_</span><span class='embexpr_beg'>#{</span><span class='ivar'>@name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_containing_sprite</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_z'>z</span> <span class='op'>=</span> <span class='ivar'>@z</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='ivar'>@width</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> <span class='ivar'>@height</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='ivar'>@name</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_source_x'>source_x</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_source_y'>source_y</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_source_w'>source_w</span> <span class='op'>=</span> <span class='ivar'>@width</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_source_h'>source_h</span> <span class='op'>=</span> <span class='ivar'>@height</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_render_target'>render_target</span> <span class='op'>=</span> <span class='kw'>self</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cut_containing_sprites-instance_method">
  
    #<strong>cut_containing_sprites</strong>(rect)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Expects xywh</p>

<pre class="code ruby"><code class="ruby">            right
              v
top -&gt; +----+-+   |
       |    |r|   |
       | 1  +-+---+ &lt;- bottom
       |    |  4  |
       |    |     |
0,0 -&gt; +----+-----+
            ^     ^
           left   @width
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 177</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cut_containing_sprites'>cut_containing_sprites</span><span class='lparen'>(</span><span class='id identifier rubyid_rect'>rect</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_left'>left</span>   <span class='op'>=</span> <span class='id identifier rubyid_rect'>rect</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_bottom'>bottom</span> <span class='op'>=</span> <span class='id identifier rubyid_rect'>rect</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_right'>right</span>  <span class='op'>=</span> <span class='id identifier rubyid_left'>left</span> <span class='op'>+</span> <span class='id identifier rubyid_rect'>rect</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_top'>top</span>    <span class='op'>=</span> <span class='id identifier rubyid_bottom'>bottom</span> <span class='op'>+</span> <span class='id identifier rubyid_rect'>rect</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span>

  <span class='lbracket'>[</span>
    <span class='comment'># 1
</span>    <span class='lbrace'>{</span>
      <span class='label'>x:</span>        <span class='int'>0</span><span class='comma'>,</span>
      <span class='label'>source_x:</span> <span class='int'>0</span><span class='comma'>,</span>
      <span class='label'>y:</span>        <span class='int'>0</span><span class='comma'>,</span>
      <span class='label'>source_y:</span> <span class='int'>0</span><span class='comma'>,</span>
      <span class='label'>w:</span>        <span class='id identifier rubyid_left'>left</span><span class='comma'>,</span>
      <span class='label'>source_w:</span> <span class='id identifier rubyid_left'>left</span><span class='comma'>,</span>
      <span class='label'>h:</span>        <span class='id identifier rubyid_top'>top</span><span class='comma'>,</span>
      <span class='label'>source_h:</span> <span class='id identifier rubyid_top'>top</span><span class='comma'>,</span>
      <span class='label'>path:</span>     <span class='ivar'>@name</span>
    <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='comment'># 2
</span>    <span class='lbrace'>{</span>
      <span class='label'>x:</span>        <span class='int'>0</span><span class='comma'>,</span>
      <span class='label'>source_x:</span> <span class='int'>0</span><span class='comma'>,</span>
      <span class='label'>y:</span>        <span class='id identifier rubyid_top'>top</span><span class='comma'>,</span>
      <span class='label'>source_y:</span> <span class='id identifier rubyid_top'>top</span><span class='comma'>,</span>
      <span class='label'>w:</span>        <span class='id identifier rubyid_right'>right</span><span class='comma'>,</span>
      <span class='label'>source_w:</span> <span class='id identifier rubyid_right'>right</span><span class='comma'>,</span>
      <span class='label'>h:</span>        <span class='ivar'>@height</span> <span class='op'>-</span> <span class='id identifier rubyid_top'>top</span><span class='comma'>,</span>
      <span class='label'>source_h:</span> <span class='ivar'>@height</span> <span class='op'>-</span> <span class='id identifier rubyid_top'>top</span><span class='comma'>,</span>
      <span class='label'>path:</span>     <span class='ivar'>@name</span>
    <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='comment'># 3
</span>    <span class='lbrace'>{</span>
      <span class='label'>x:</span>        <span class='id identifier rubyid_right'>right</span><span class='comma'>,</span>
      <span class='label'>source_x:</span> <span class='id identifier rubyid_right'>right</span><span class='comma'>,</span>
      <span class='label'>y:</span>        <span class='id identifier rubyid_bottom'>bottom</span><span class='comma'>,</span>
      <span class='label'>source_y:</span> <span class='id identifier rubyid_bottom'>bottom</span><span class='comma'>,</span>
      <span class='label'>w:</span>        <span class='ivar'>@width</span> <span class='op'>-</span> <span class='id identifier rubyid_right'>right</span><span class='comma'>,</span>
      <span class='label'>source_w:</span> <span class='ivar'>@width</span> <span class='op'>-</span> <span class='id identifier rubyid_right'>right</span><span class='comma'>,</span>
      <span class='label'>h:</span>        <span class='ivar'>@height</span> <span class='op'>-</span> <span class='id identifier rubyid_bottom'>bottom</span><span class='comma'>,</span>
      <span class='label'>source_h:</span> <span class='ivar'>@height</span> <span class='op'>-</span> <span class='id identifier rubyid_bottom'>bottom</span><span class='comma'>,</span>
      <span class='label'>path:</span>     <span class='ivar'>@name</span>
    <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='comment'># 4
</span>    <span class='lbrace'>{</span>
      <span class='label'>x:</span>        <span class='id identifier rubyid_left'>left</span><span class='comma'>,</span>
      <span class='label'>source_x:</span> <span class='id identifier rubyid_left'>left</span><span class='comma'>,</span>
      <span class='label'>y:</span>        <span class='int'>0</span><span class='comma'>,</span>
      <span class='label'>source_y:</span> <span class='int'>0</span><span class='comma'>,</span>
      <span class='label'>w:</span>        <span class='ivar'>@width</span> <span class='op'>-</span> <span class='id identifier rubyid_left'>left</span><span class='comma'>,</span>
      <span class='label'>source_w:</span> <span class='ivar'>@width</span> <span class='op'>-</span> <span class='id identifier rubyid_left'>left</span><span class='comma'>,</span>
      <span class='label'>h:</span>        <span class='id identifier rubyid_bottom'>bottom</span><span class='comma'>,</span>
      <span class='label'>source_h:</span> <span class='id identifier rubyid_bottom'>bottom</span><span class='comma'>,</span>
      <span class='label'>path:</span>     <span class='ivar'>@name</span>
    <span class='rbrace'>}</span>
  <span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="exclude_from_serialize-instance_method">
  
    #<strong>exclude_from_serialize</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


107
108
109</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 107</span>

<span class='kw'>def</span> <span class='id identifier rubyid_exclude_from_serialize'>exclude_from_serialize</span>
  <span class='qwords_beg'>%w[</span><span class='tstring_content'>sprites</span><span class='words_sep'> </span><span class='tstring_content'>primitives</span><span class='tstring_end'>]</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="full_containing_sprite-instance_method">
  
    #<strong>full_containing_sprite</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 235</span>

<span class='kw'>def</span> <span class='id identifier rubyid_full_containing_sprite'>full_containing_sprite</span>
  <span class='kw'>return</span> <span class='ivar'>@full_containing_sprite</span> <span class='kw'>if</span> <span class='ivar'>@full_containing_sprite</span>

  <span class='ivar'>@full_containing_sprite</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Zif.html" title="Zif (module)">Zif</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Sprite.html" title="Zif::Sprite (class)">Sprite</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Sprite.html#initialize-instance_method" title="Zif::Sprite#initialize (method)">new</a></span></span><span class='period'>.</span><span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rt_</span><span class='embexpr_beg'>#{</span><span class='ivar'>@name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_full_containing_sprite</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_z'>z</span> <span class='op'>=</span> <span class='ivar'>@z</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='ivar'>@width</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> <span class='ivar'>@height</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='ivar'>@name</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_source_x'>source_x</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_source_y'>source_y</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_source_w'>source_w</span> <span class='op'>=</span> <span class='ivar'>@width</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_source_h'>source_h</span> <span class='op'>=</span> <span class='ivar'>@height</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_render_target'>render_target</span> <span class='op'>=</span> <span class='kw'>self</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="project_from-instance_method">
  
    #<strong>project_from</strong>(rect = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Expects rect is x, y, w, h - not source_…</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


99
100
101
102
103
104
105</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 99</span>

<span class='kw'>def</span> <span class='id identifier rubyid_project_from'>project_from</span><span class='lparen'>(</span><span class='id identifier rubyid_rect'>rect</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_containing_sprite'>containing_sprite</span><span class='period'>.</span><span class='id identifier rubyid_assign'>assign</span><span class='lparen'>(</span>
    <span class='id identifier rubyid_containing_sprite'>containing_sprite</span><span class='period'>.</span><span class='id identifier rubyid_source_rect_hash'>source_rect_hash</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span>
      <span class='const'><span class='object_link'><a href="../Zif.html" title="Zif (module)">Zif</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Sprite.html" title="Zif::Sprite (class)">Sprite</a></span></span><span class='period'>.</span><span class='id identifier rubyid_rect_hash_to_source_hash'><span class='object_link'><a href="Sprite.html#rect_hash_to_source_hash-class_method" title="Zif::Sprite.rect_hash_to_source_hash (method)">rect_hash_to_source_hash</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_rect'>rect</span><span class='rparen'>)</span>
    <span class='rparen'>)</span>
  <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="project_to-instance_method">
  
    #<strong>project_to</strong>(rect = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Expects rect is x, y, w, h</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


92
93
94
95
96</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 92</span>

<span class='kw'>def</span> <span class='id identifier rubyid_project_to'>project_to</span><span class='lparen'>(</span><span class='id identifier rubyid_rect'>rect</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_containing_sprite'>containing_sprite</span><span class='period'>.</span><span class='id identifier rubyid_assign'>assign</span><span class='lparen'>(</span>
    <span class='id identifier rubyid_containing_sprite'>containing_sprite</span><span class='period'>.</span><span class='id identifier rubyid_rect_hash'>rect_hash</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_rect'>rect</span><span class='rparen'>)</span>
  <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="redraw-instance_method">
  
    #<strong>redraw</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>By setting width and height, this actually recreates the render target in memory This is the only way to force any changes to the RT.  You must call this any time you want to redraw @sprites, etc</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59
60
61
62
63
64
65
66
67
68
69
70
71</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_redraw'>redraw</span>
  <span class='comment'># puts &quot;RenderTarget#redraw: #{@name} #{@width} #{@height} #{@sprites.length} sprites, #{@labels.length} labels&quot;
</span>  <span class='comment'># $services&amp;.named(:tracer)&amp;..mark(&quot;#redraw: #{@name} Begin&quot;)
</span>  <span class='id identifier rubyid_targ'>targ</span> <span class='op'>=</span> <span class='gvar'>$gtk</span><span class='period'>.</span><span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_outputs'>outputs</span><span class='lbracket'>[</span><span class='ivar'>@name</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_targ'>targ</span><span class='period'>.</span><span class='id identifier rubyid_width'>width</span>  <span class='op'>=</span> <span class='ivar'>@width</span>
  <span class='id identifier rubyid_targ'>targ</span><span class='period'>.</span><span class='id identifier rubyid_height'>height</span> <span class='op'>=</span> <span class='ivar'>@height</span>

  <span class='comment'># It&#39;s important to set the background color intentionally.  Even if alpha == 0, semi-transparent images in
</span>  <span class='comment'># render targets will pick up this color as an additive.  Usually you want black.
</span>  <span class='id identifier rubyid_targ'>targ</span><span class='period'>.</span><span class='id identifier rubyid_background_color'>background_color</span> <span class='op'>=</span> <span class='ivar'>@bg_color</span>
  <span class='id identifier rubyid_targ'>targ</span><span class='period'>.</span><span class='id identifier rubyid_primitives'>primitives</span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@primitives</span> <span class='kw'>if</span> <span class='ivar'>@primitives</span><span class='op'>&amp;.</span><span class='id identifier rubyid_any?'>any?</span>
  <span class='id identifier rubyid_targ'>targ</span><span class='period'>.</span><span class='id identifier rubyid_sprites'>sprites</span>    <span class='op'>&lt;&lt;</span> <span class='ivar'>@sprites</span>    <span class='kw'>if</span> <span class='ivar'>@sprites</span><span class='op'>&amp;.</span><span class='id identifier rubyid_any?'>any?</span>
  <span class='id identifier rubyid_targ'>targ</span><span class='period'>.</span><span class='id identifier rubyid_labels'>labels</span>     <span class='op'>&lt;&lt;</span> <span class='ivar'>@labels</span>     <span class='kw'>if</span> <span class='ivar'>@labels</span><span class='op'>&amp;.</span><span class='id identifier rubyid_any?'>any?</span>
  <span class='comment'># $services&amp;.named(:tracer)&amp;..mark(&quot;#redraw: #{@name} Complete&quot;)
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="redraw_from_buffer-instance_method">
  
    #<strong>redraw_from_buffer</strong>(sprites = [], cut_rect = nil, additional_containing_sprites = [])  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 143</span>

<span class='kw'>def</span> <span class='id identifier rubyid_redraw_from_buffer'>redraw_from_buffer</span><span class='lparen'>(</span><span class='id identifier rubyid_sprites'>sprites</span><span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_cut_rect'>cut_rect</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_additional_containing_sprites'>additional_containing_sprites</span><span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='comment'># $services&amp;.named(:tracer)&amp;..mark(&quot;RenderTarget#redraw_from_buffer: #{@name} Begin&quot;)
</span>  <span class='id identifier rubyid_source_buffer_sprites'>source_buffer_sprites</span> <span class='op'>=</span> <span class='id identifier rubyid_cut_rect'>cut_rect</span> <span class='op'>?</span> <span class='id identifier rubyid_cut_containing_sprites'>cut_containing_sprites</span><span class='lparen'>(</span><span class='id identifier rubyid_cut_rect'>cut_rect</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='lbracket'>[</span><span class='id identifier rubyid_full_containing_sprite'>full_containing_sprite</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_set_inactive_buffer_name'>set_inactive_buffer_name</span> <span class='kw'>unless</span> <span class='ivar'>@inactive_buffer_name</span>
  <span class='comment'># puts &quot;RenderTarget#redraw_from_buffer: name: #{@name}, inactive: #{@inactive_buffer_name}&quot;
</span>  <span class='comment'># puts &quot;RenderTarget#redraw_from_buffer: cut_rect: #{cut_rect}, source: #{source_buffer_sprites.inspect}&quot;
</span>
  <span class='comment'># $services&amp;.named(:tracer)&amp;..mark(&quot;RenderTarget#redraw_from_buffer: #{@name} Sprites&quot;)
</span>  <span class='id identifier rubyid_targ'>targ</span> <span class='op'>=</span> <span class='gvar'>$gtk</span><span class='period'>.</span><span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_outputs'>outputs</span><span class='lbracket'>[</span><span class='ivar'>@inactive_buffer_name</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_targ'>targ</span><span class='period'>.</span><span class='id identifier rubyid_width'>width</span>  <span class='op'>=</span> <span class='ivar'>@width</span>
  <span class='id identifier rubyid_targ'>targ</span><span class='period'>.</span><span class='id identifier rubyid_height'>height</span> <span class='op'>=</span> <span class='ivar'>@height</span>
  <span class='comment'># $services&amp;.named(:tracer)&amp;..mark(&quot;RenderTarget#redraw_from_buffer: #{@name} HW&quot;)
</span>  <span class='id identifier rubyid_targ'>targ</span><span class='period'>.</span><span class='id identifier rubyid_background_color'>background_color</span> <span class='op'>=</span> <span class='ivar'>@bg_color</span>
  <span class='id identifier rubyid_targ'>targ</span><span class='period'>.</span><span class='id identifier rubyid_sprites'>sprites</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_source_buffer_sprites'>source_buffer_sprites</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_sprites'>sprites</span>

  <span class='id identifier rubyid_switch_buffer'>switch_buffer</span><span class='lparen'>(</span><span class='id identifier rubyid_additional_containing_sprites'>additional_containing_sprites</span><span class='rparen'>)</span>
  <span class='comment'># $services&amp;.named(:tracer)&amp;..mark(&quot;RenderTarget#redraw_from_buffer: #{@name} End&quot;)
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="relative_point-instance_method">
  
    #<strong>relative_point</strong>(point)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


81
82
83
84
85
86
87
88
89</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 81</span>

<span class='kw'>def</span> <span class='id identifier rubyid_relative_point'>relative_point</span><span class='lparen'>(</span><span class='id identifier rubyid_point'>point</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="../Zif.html" title="Zif (module)">Zif</a></span></span><span class='period'>.</span><span class='id identifier rubyid_add_positions'><span class='object_link'><a href="../Zif.html#add_positions-class_method" title="Zif.add_positions (method)">add_positions</a></span></span><span class='lparen'>(</span>
    <span class='const'><span class='object_link'><a href="../Zif.html" title="Zif (module)">Zif</a></span></span><span class='period'>.</span><span class='id identifier rubyid_sub_positions'><span class='object_link'><a href="../Zif.html#sub_positions-class_method" title="Zif.sub_positions (method)">sub_positions</a></span></span><span class='lparen'>(</span>
      <span class='id identifier rubyid_point'>point</span><span class='comma'>,</span> <span class='comment'># FIXME??: Zif.position_math(:mult, point, containing_sprite.source_wh),
</span>      <span class='id identifier rubyid_containing_sprite'>containing_sprite</span><span class='period'>.</span><span class='id identifier rubyid_xy'>xy</span>
    <span class='rparen'>)</span><span class='comma'>,</span>
    <span class='id identifier rubyid_containing_sprite'>containing_sprite</span><span class='period'>.</span><span class='id identifier rubyid_source_xy'>source_xy</span>
  <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="resize-instance_method">
  
    #<strong>resize</strong>(w, h)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


50
51
52
53</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 50</span>

<span class='kw'>def</span> <span class='id identifier rubyid_resize'>resize</span><span class='lparen'>(</span><span class='id identifier rubyid_w'>w</span><span class='comma'>,</span> <span class='id identifier rubyid_h'>h</span><span class='rparen'>)</span>
  <span class='ivar'>@width</span> <span class='op'>=</span> <span class='id identifier rubyid_w'>w</span>
  <span class='ivar'>@height</span> <span class='op'>=</span> <span class='id identifier rubyid_h'>h</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_inactive_buffer_name-instance_method">
  
    #<strong>set_inactive_buffer_name</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <hr>

<p>Double Buffering</p>

<p>These are methods are for drawing new sprites on top of an already rendered RT, and optionally cut out a rectangle from the RT (for deletion) You might want to use this if your list of @sprites for the RT is very large, so rendering all of the sprites is slow, and you just need to modify a small subset.</p>

<p>The classic example is a paint application, where each tick adds a new brush stroke to the canvas. Instead of letting the @sprites array grow unbounded and redrawing all of them for each stroke, simply take the previous canvas and draw a new sprite on top of it.</p>

<p>A more complex example is if a single tile is changing inside of a large tile map. Instead of redrawing every tile, delete the tile which is changing from the already rendered target, and then redraw just the changing tile.</p>

<p>So one drawback of using this is that you are forced to specify a single rectangle area which is changing.</p>

<p>Another drawback to using this is that the @path for any sprite referencing the RenderTarget needs to change every time the buffer is switched.  Since this references it&#39;s own containing sprite, we can update the path for that sprite automatically, but if there exist any additional sprites referencing the @path (like if you have a map and a minimap pointing to the same path), those will have to be updated manually. To support this, you can pass additional sprites as an array to #switch_buffer.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


134
135
136</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 134</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_inactive_buffer_name'>set_inactive_buffer_name</span>
  <span class='ivar'>@inactive_buffer_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_buf</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="switch_buffer-instance_method">
  
    #<strong>switch_buffer</strong>(additional_containing_sprites = [])  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


138
139
140
141</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/sprites/render_target.rb', line 138</span>

<span class='kw'>def</span> <span class='id identifier rubyid_switch_buffer'>switch_buffer</span><span class='lparen'>(</span><span class='id identifier rubyid_additional_containing_sprites'>additional_containing_sprites</span><span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_containing_sprite'>containing_sprite</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_additional_containing_sprites'>additional_containing_sprites</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_cs'>cs</span><span class='op'>|</span> <span class='id identifier rubyid_cs'>cs</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='ivar'>@inactive_buffer_name</span> <span class='rbrace'>}</span>
  <span class='ivar'>@inactive_buffer_name</span><span class='comma'>,</span> <span class='ivar'>@name</span> <span class='op'>=</span> <span class='ivar'>@name</span><span class='comma'>,</span> <span class='ivar'>@inactive_buffer_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sun Jan  3 16:59:27 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-2.6.3).
</div>

    </div>
  </body>
</html>